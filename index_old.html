<!DOCTYPE HTML>
<html>
	<head>
		<title>Start</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="icon" type="image/png" href="pomf.png">
		<link href="style.css" rel="stylesheet" type="text/css">
		<script type="text/javascript">
			var bgs = [ 'bg1', 'bg2', 'bg3', 'bg4', 'bg5', 'bg6', 'bg7', 'bg8' ];
			var bg = bgs[Math.floor(Math.random() * bgs.length)];
			document.querySelector('html').classList.add(bg);
		</script>
	</head>
	
	<body>
		<div class="center">
			<div id="header">
				<div class="top" id="title">
					<a href="javascript:void(0);" onclick="toggle_visibility('title', 'weather_container');" style="cursor: pointer;">Hi :3</a>
				</div>
				<div class="top" id="weather_container" onclick="toggle_visibility('weather_container', 'title');" style="cursor: pointer;">
					<div id="weather"></div>
					<div id="weather2"></div>
				</div>
			</div>
			<div class="searchContainer">
                <form class="searchForm" method="get" action="https://google.com/search">
                    <input class="searchBar google" type="text" name="q" placeholder="G"/>
                </form>
                <form class="searchForm" method="get" action="https://youtube.com/results">
                    <input class="searchBar youtube" type="text" name="search_query" placeholder="Y" />
                </form>
                <form class="searchForm" method="get" action="https://en.wikipedia.org/w/index.php">
                    <input class="searchBar wikipedia" type="text" name="search" placeholder="W" />
                </form>
            </div>
			
			<br />
			<div class="d1x1" id="news">
				<h1>News</h1>
				<a href="http://m.nos.nl/">NOS.nl</a> <br />
				<a href="http://www.nu.nl/">nu.nl</a> <br />
				<a href="http://www.tweakers.net/">Tweakers</a> <br />
				<a href="http://www.theverge.com/">The Verge</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>Social</h1>
				<a href="http://boards.4chan.org/g/">/g/ - Technology</a> <br />
				<a href="http://www.reddit.com/">reddit</a><br />
				<a href="http://anekihou.se/chat/">Alice Chat</a><br />
			</div>
			
			<div class="d1x1">
				<h1>Media</h1>
				<a href="https://www.youtube.com/feed/subscriptions/">YouTube</a> <br />
				<a href="http://www.soundcloud.com/">SoundCloud</a> <br />
				<a href="http://www.animebytes.tv/">AnimeBytes</a> <br />
				<a href="http://www.thepiratebay.se/">The Pirate Bay</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>TU/e</h1>
				<a href="http://oase.tue.nl/">OASE</a> <br />
				<a href="http://webmail.tue.nl/">E-mail</a> <br />
				<a href="http://www.es.ele.tue.nl/education/oo2/sitemap.php">Venus Exploration</a> <br />
				<a href="https://dlwpswbsp.tue.nl/150-2013/3aced67b61874e5fbfde2ac4c08be6bf/default.aspx">Systems</a> <br />
			</div>
		
					
			<div class="d1x1">
				<h1>Following</h1>
				<a href="http://www.xkcd.com/">xkcd</a> <br />
				<a href="http://what-if.xkcd.com/">What If?</a> <br />
				<a href="http://www.prequeladventure.com/">PREQUEL</a> <br />
				<a href="http://www.mangareader.net/its-not-my-fault-that-im-not-popular">WataMote</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>Following</h1>
				<a href="http://idforums.net/index.php?showforum=2">Initial D</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>Stuff</h1>
				<a href="http://www.nederland.fm/">NL.fm</a> <br />
				<a href="http://battlelog.battlefield.com/bf4/">BF4 Battlelog</a> <br />
				<a href="http://www.9292.nl/">9292</a> <br />
				<a href="http://pomf.se/">Pomf.se</a> <br />
			</div>
			
			<div class="d1x1">
				<h1>E-mail</h1>
				<a href="http://mail.google.com">Gmail</a> <br />
				<a href="http://outlook.com">Outlook</a> <br />
			</div>
			
			<div class="rss">
				<h1><a href="http://m.nos.nl/">NOS Nieuws</a></h1>
				<div class="rss_child" id="nos"></div>
			</div>
			
			<div class="rss">
				<h1><a href="http://www.tweakers.net/">Tweakers</a></h1>
				<div class="rss_child" id="tweakers"></div>
			</div>
						
			<div class="d4x2" id="xkcd_container">
				<h1><a href="http://www.xkcd.com/">xkcd</a></h1>
				<div id="xkcd"></div>
			</div>
			
			<div class="d4x2" id="whatif_container">
				<h1><a href="http://what-if.xkcd.com/">What If?</a></h1>
				<div id="whatif"></div>
			</div>
			
			<div class="d4x2" id="prequel_container">
				<h1><a href="http://www.prequeladventure.com/">PREQUEL</a></h1>
				<div id="prequel"></div>
				<div id="prequel_date"></div>
			</div>
		</div>
		
		<script type="text/javascript">
			/*var stylesheet = document.createElement('link');
			stylesheet.href = 'style.css';
			stylesheet.rel = 'stylesheet';
			stylesheet.type = 'text/css';
			document.getElementsByTagName('head')[0].appendChild(stylesheet);*/
		</script>
		
		<script type="text/javascript" src="js/jquery-2.1.0.min.js"></script>
		
		<script type="text/javascript">
			// Load the feeds
			$('#tweakers').FeedEk( {
				FeedUrl : 'http://tweakers.net/feeds/nieuws.xml',
				MaxCount : 20,
				ShowDesc : false,
				ShowPubDate : false,
				TitleLinkTarget:'_self',
				DescCharacterLimit:1,
			});
			$('#nos').FeedEk( {
				FeedUrl : 'http://feeds.nos.nl/nosjournaal',
				MaxCount : 20,
				ShowDesc : false,
				ShowPubDate : false,
				TitleLinkTarget:'_self',
			});
			
			// Load the date for Prequel
			$('#prequel_date').FeedEk( {
				FeedUrl: 'http://www.prequeladventure.com/feed/',
				MaxCount : 1,
				ShowDesc : false,
				ShowPubDate : true,
			});
			
			// Determine current date
			var date = new Date();
			var day = date.getDay();
			var currentmonth = parseInt(date.getMonth()+1,10);
			var currentdate = date.getDate();
			
			$(window).load(function(){
				// Display Prequel after an update
				var prequel_date_raw = document.querySelector(".itemDate").innerHTML;
				var regex = prequel_date_raw.match(/(\d+)/g);
				var regexdate = parseInt(regex[1], 10);
				var regexmonth = parseInt(regex[0], 10);
				if ((regexmonth == currentmonth) && (currentdate >= regexdate) && (currentdate <= regexdate+1) ) {
					$('#prequel').FeedEk( {
						FeedUrl: 'http://www.prequeladventure.com/feed/',
						MaxCount : 1,
						ShowDesc : true,
						ShowPubDate : false,
						TitleLinkTarget:'_self',
					});
					document.getElementById("prequel_container").style.display="inline";
					$(document).ready(function () {
						var itemContentPresent = false;
						function checkForItemContent() {
							itemContentPresent = ($('.itemContent').length > 0) ? true : false;
							if (itemContentPresent) {
								$('#prequel').find('img').each(function() {
									var newSrc = 'http://www.prequeladventure.com' + $(this).attr('src');
									$(this).attr('src', newSrc);
								});
								window.clearInterval(doCheck); 
							}
						}
						var doCheck = window.setInterval(checkForItemContent, 250);
					});
				}
				
				// NOS desktop to NOS mobile
				var itemContentPresent = false;
				function checkForItemContent() {
					itemContentPresent = ($('.itemContent').length > 0) ? true : false;
					if (itemContentPresent) {
						$("a[href^='http://feeds.nos.nl']")
							.each(function() { 
								this.href = this.href.replace(/^http:\/\/feeds\.nos\.nl\/(.*)\//, "http://m.nos.nl/artikel/");
							}
						);
						window.clearInterval(doCheck); 
					}
				}
				
				// XKCD content
				var doCheck = window.setInterval(checkForItemContent, 250);
				if (day == 1 || day == 3 || day == 5) {
					$('#xkcd').FeedEk( {
						FeedUrl : 'http://xkcd.com/atom.xml',
						MaxCount : 1,
						ShowPubDate : false,
						TitleLinkTarget:'_self',
					});
					document.getElementById("xkcd_container").style.display="inline";
				}
				if (day == 2 || day == 3) {
					$("#whatif").FeedEk( {
						FeedUrl : 'http://what-if.xkcd.com/feed.atom',
						MaxCount : 1,
						ShowPubDate : false,
						TitleLinkTarget:'_self',
					});
					document.getElementById("whatif_container").style.display="inline";
					$(document).ready(function () {
						var itemContentPresent = false;
						function checkForItemContent() {
							itemContentPresent = ($('.itemContent').length > 0) ? true : false;
							if (itemContentPresent) {
								$('#whatif').find('img').each(function() {
									var newSrc = 'http://what-if.xkcd.com' + $(this).attr('src');
									$(this).attr('src', newSrc);
								});
								window.clearInterval(doCheck); 
							}
						}
						var doCheck = window.setInterval(checkForItemContent, 250);
					});
				}
				
				// Weather
				$.simpleWeather({
					woeid: '727942',
					unit: 'c',
					success: function(weather) {
						html = '<p>'+weather.city+', '+weather.region+'<br />';
						html += weather.temp+'&deg;'+weather.units.temp+'<br />';
						html += weather.currently+'</p>';
						$("#weather").html(html);
					},
					error: function(error) {
						$("#weather").html('<p>'+error+'</p>');
					}
				});
				
				$.simpleWeather({
					woeid: '729028',
					unit: 'c',
					success: function(weather) {
						html = '<p>'+weather.city+', '+weather.region+'<br />';
						html += weather.temp+'&deg;'+weather.units.temp+innerWidth+'<br />';
						html += weather.currently+'</p>';
						$("#weather2").html(html);
					},
					error: function(error) {
						$("#weather2").html('<p>'+error+'</p>');
					}
				});
			});
			
			var wide = window.matchMedia( "(min-width: 840px)" );
			var narrow = window.matchMedia( "(max-width: 840px)" );
			var mobile = window.matchMedia( "(max-width: 440px)" );
			
			if (wide.matches){ function toggle_visibility(id1, id2) {
				var hide = document.getElementById(id1);
				var show = document.getElementById(id2);
				//hide.style.display = 'none';
				//show.style.display = 'block';
				hide.style.height = '0';
				hide.style.overflow = 'hidden';
				show.style.height = '130px';
			} }
			if (narrow.matches && mobile.matches) { function toggle_visibility(id1, id2) {
				var hide = document.getElementById(id1);
				var show = document.getElementById(id2);
				//hide.style.display = 'none';
				//show.style.display = 'block';
				hide.style.height = '0';
				hide.style.overflow = 'hidden';
				show.style.height = '80px';
			} }
			
			//document.getElementById("weather_container").style.display="none";
			/*
			// media query event handler
			if (matchMedia) {
				var narrow = window.matchMedia( "(max-width: 840px)" );
				var mobile = window.matchMedia( "(max-width: 440px)" );
				narrow.addListener(WidthChange);
				mobile.addListener(WidthChange);
				WidthChange(narrow);
				WidthChange(mobile);
			}

			// media query change
			function WidthChange(narrow) {
				if (!narrow.matches){ function toggle_visibility(id1, id2) {
					var hide = document.getElementById(id1);
					var show = document.getElementById(id2);
					//hide.style.display = 'none';
					//show.style.display = 'block';
					hide.style.height = '0';
					hide.style.overflow = 'hidden';
					show.style.height = '130px';
				} }
			}
			function WidthChange(mobile) {
				if (narrow.matches && !mobile.matches) { function toggle_visibility(id1, id2) {
					var hide = document.getElementById(id1);
					var show = document.getElementById(id2);
					//hide.style.display = 'none';
					//show.style.display = 'block';
					hide.style.height = '0';
					hide.style.overflow = 'hidden';
					show.style.height = '80px';
				} }
			}
			*/
			
			/*$('#title').click(function(){
				if (window.innerWidth > 440){
					$('#title').slideToggle();
					$('#weather_container').slideToggle();
				}
			});
			$('#weather_container').click(function(){
				$('#title').slideToggle();
				$('#weather_container').slideToggle();
			});
			document.getElementById("weather_container").style.display="none";
			*/
		</script>
	</body>
</html>
<!--<noscript><link rel="stylesheet" href="style.css"></noscript>-->